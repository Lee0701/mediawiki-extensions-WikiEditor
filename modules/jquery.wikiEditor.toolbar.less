@import 'mediawiki.mixins';

/**
 * CSS for WikiEditor Toolbar jQuery plugin
 */

.wikiEditor-ui-toolbar {
	position: relative;
	display: block;

	.empty {
		display: none;
	}

	/* Expandable Sections */
	.sections {
		float: left;
		inline-size: 100%;
		clear: both;

		.section {
			float: left;
			inline-size: 100%;
			border-block-start: 1px solid #c8ccd1;
		}

		.section-hidden {
			display: none;
		}
	}

	/* Top Level Containers */
	/* Tabs */
	.tabs {
		float: left;
		block-size: 100%;
		list-style: none;
		margin: 0 3px;
		min-block-size: 32px;
		position: relative;

		span.tab {
			position: relative;
			float: left;
			/* stylelint-disable-next-line declaration-property-unit-disallowed-list */
			line-height: 32px;

			a {
				color: #0645ad;
				cursor: pointer;
				display: block;
				block-size: 32px;
				padding-inline-start: 18px;
				padding-inline-end: 12px;

				&:before {
					content: '';
					background: url( images/toolbar/arrow-down.svg ) center no-repeat;
					display: block;
					position: absolute;
					inset-block-start: 0;
					inset-inline-start: 0;
					inline-size: 16px;
					block-size: 32px;
					transition: transform 100ms;

					body.ltr & {
						transform: rotate( -90deg );
					}

					body.rtl & {
						transform: rotate( 90deg );
					}
				}
			}

			a:visited {
				color: #0645ad;
			}

			a.current,
			a.current:visited {
				color: #222;

				&:hover {
					text-decoration: none;
				}

				&:before {
					body.ltr &,
					body.rtl & {
						transform: rotate( 0 );
					}
				}
			}
		}
	}

	/* Top Level Containers */
	.tabs,
	.section-main,
	.section-secondary {
		position: relative;
		float: left;
		min-block-size: 32px;
		block-size: 100%;
	}

	.section-secondary {
		float: right;

		.group {
			padding-inline-end: 0;
			padding-inline-start: 6px;
			border-inline-start: 1px solid #c8ccd1;
		}
	}

	/* Groups */
	.group {
		float: left;
		display: flex;
		min-block-size: 26px;
		padding-inline-end: 6px;
		border-inline-end: 1px solid #c8ccd1;
		margin: 3px;

		/* Toolbar */
		.label {
			float: left;
			border: 0;
			block-size: 22px;
			/* stylelint-disable-next-line declaration-property-unit-disallowed-list */
			line-height: 22px;
			margin: 2px 8px 2px 5px;
			color: #54595d;
			cursor: default;
		}

		img.tool {
			float: left;
			border: 0;
			block-size: 22px;
			inline-size: 22px;
			padding: 2px;
			cursor: pointer;
		}

		.tool-select {
			float: left;
			margin: 2px 0 2px 2px;
			block-size: 22px;
			cursor: pointer;
			border: 1px solid #c8ccd1;
			padding: 0;
			background-color: #fff;

			.label {
				position: relative;
				padding: 0 26px 0 4px;
				margin: 0;
				cursor: pointer;
				text-decoration: none;
				color: #222;

				&:after {
					content: '';
					background: url( images/toolbar/arrow-down.svg ) center no-repeat;
					display: block;
					position: absolute;
					inset-block-start: 0;
					inset-inline-end: 4px;
					inline-size: 16px;
					block-size: 22px;
				}
			}

			&.options-shown .label:after {
				transform: rotate( 180deg );
			}

			.options {
				position: absolute;
				display: none;
				margin-inline-start: -1px;
				margin-block-start: 22px;
				border: 1px solid #c8ccd1;
				background-color: #fff;
				z-index: 1;

				.option {
					display: block;
					padding: 0.5em;
					text-decoration: none;
					color: #000;
					white-space: nowrap;

					&:hover {
						background-color: #eaf3ff;
					}

					&[ rel='heading-2' ] {
						font-size: 150%;
						font-weight: normal;
					}

					&[ rel='heading-3' ] {
						font-size: 132%;
						font-weight: normal;
					}

					&[ rel='heading-4' ] {
						font-size: 116%;
						font-weight: normal;
					}

					&[ rel='heading-5' ] {
						font-size: 100%;
						font-weight: bold;
					}
				}
			}

			&:hover .options,
			&.options-shown .options {
				display: block;
			}
		}
	}

	.group-search {
		float: right;
		border-inline-end: 0;
		border-inline-start: 1px solid #c8ccd1;
	}

	/* Booklet */
	.booklet {
		> .index {
			float: left;
			inline-size: 20%;
			block-size: 125px;
			overflow: auto;
			/* stylelint-disable-next-line plugin/no-unsupported-browser-features */
			resize: horizontal;

			> div {
				padding: 4px 4px 4px 6px;
				cursor: pointer;
			}

			.wikiEditor-character-highlighted {
				background-color: rgba( 41, 98, 204, 0.1 );
				color: #000;
			}
		}

		.pages {
			block-size: 125px;
			overflow: auto;
		}
	}

	/* Help Pages */
	.page-table {
		padding-inline-start: 5px;
		padding-inline-end: 5px;

		table {
			background: none;
			border-collapse: collapse;
			inline-size: 100%;
		}

		th {
			color: #54595d;
		}

		td {
			color: #000;
			border-block-start: 1px solid #eaecf0;
		}

		th,
		td {
			margin: 0;
			padding: 5px;
			text-align: left;
		}
	}

	.section-help {
		.page-table {
			.cell {
				vertical-align: top;
			}

			td.cell-syntax {
				font-family: monospace, 'Courier';
			}

			td.cell-syntax,
			td.cell-result {
				inline-size: 40%;
			}

			td.cell-description {
				inline-size: 20%;
			}

			/* T33649 */
			.table-link {
				td.cell-syntax {
					white-space: pre;
				}
			}
		}
	}

	/* Characters Pages */
	.page-characters {
		padding-block-end: 5px;

		div {
			span {
				border: 1px solid #eaecf0;
				padding: 5px 8px;
				margin-inline-start: 5px;
				margin-block-start: 5px;
				block-size: 1em;
				display: inline-block;
				color: #202122;
				text-decoration: none;
				cursor: pointer;
				font-family: monospace, 'Courier';
				font-size: 1.25em;
				line-height: 1;

				&:hover {
					background-color: #fff;
					text-decoration: none;
					border-color: #c8ccd1;
				}
			}

			.wikiEditor-character-highlighted {
				background-color: #7db1c5;
				color: #000;
			}
		}

		div[ dir='rtl' ] span {
			/* @noflip */
			direction: rtl;
		}
	}
}

.tool-button {
	background-position: 50% 50%;
	background-repeat: no-repeat;
	display: inline-block;
	vertical-align: middle;
	inline-size: 24px;
	block-size: 24px;
	text-indent: -9999px;
	cursor: pointer;
	overflow: hidden;
}

/* OOUI buttons */
.tool.oo-ui-buttonElement-frameless.oo-ui-iconElement {
	margin: 0;
}

.ui-widget {
	table {
		td.wikieditor-toolbar-table-preview-wrapper {
			background: #eaecf0;
			padding: 10px;

			span {
				padding: 4px 6px 0;
				display: block;
			}
		}

		.wikieditor-toolbar-table-preview-frame {
			inline-size: 340px;
			background: #fff;
			padding: 10px;
			overflow: hidden;
			display: block;
			position: relative;
		}

		.wikieditor-toolbar-table-preview-content {
			inline-size: 375px;
			display: block;
		}

		.wikieditor-toolbar-table-preview {
			inline-size: 340px;
		}
	}
}
